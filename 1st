
#include "mbed.h"
#include "QEI.h"


Serial pc(SERIAL_TX, SERIAL_RX);
DigitalOut led1(LED1);
PwmOut M1F(PA_7);
PwmOut M1B(PA_6);
//Motor two is backwards somehow 
PwmOut M2F(PB_10);
PwmOut M2B(PC_7); 

// Encoder 
//DigitalOut M1EnA(PA_15);
//DigitalOut M1EnB(PB_3);
//DigitalOut M2EnA(PA_1);
//DigitalOut M2EnB(PC_4);
QEI M1Encoder (PA_15, PB_3, NC, 12);
QEI M2Encoder (PA_1, PC_4, NC, 12);
// main() runs in its own thread in the OS
// (note the calls to Thread::wait below for delays)


int main() {
    
 
    while (true) {
       
        pc.printf ("Encoder1:%d Encoder2: %d", M1Encoder.getPulses(), M2Encoder.getPulses());
        //M2Encoder.getPulses();
        M1F = 0.4;
        M2B = 0.4;
        
        //pc.printf("The Good Motor (M2):\n");
        //M2Encoder.getCurrentState();
    
    

    }
}
