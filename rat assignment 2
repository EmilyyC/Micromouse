#include "mbed.h"
#include "QEI.h"

DigitalOut led1(LED1);
PwmOut M1B(PB_10);
PwmOut M1F(PC_7);
PwmOut M2B(PB_6);
PwmOut M2F(PA_7);

volatile unsigned long counter=0;


int main()
{
    //make it go straight one unit
    while(counter < 13)
    {
        counter++;
        M1F = 0;
        M1B = 0.35;
        
        
        M2F = 0.33;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    
    //make it go straight one unit
    while(counter < 13)
    {
        counter++;
        M1F = 0;
        M1B = 0.35;
        
        
        M2F = 0.33;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    
    //make it turn 90 degrees left
     while(counter < 7)
    {
        counter++;
        M1F = 0;
        M1B = 0.7;
        
        
        M2F = 0;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    
    //make it go straight one unit
    while(counter < 9)
    {
        counter++;
        M1F = 0;
        M1B = 0.35;
        
        
        M2F = 0.33;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    
     //make it turn 90 degrees right
     while(counter < 6)
    {
        counter++;
        M1F = 0;
        M1B = 0;
        
        
        M2F = 0.7;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    
    //make it go straight one unit
    while(counter < 8)
    {
        counter++;
        M1F = 0;
        M1B = 0.35;
        
        
        M2F = 0.33;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    
    //make it turn 180 degrees right
     while(counter < 10)
    {
        counter++;
        M1F = 0;
        M1B = 0;
        
        
        M2F = 0.7;
        M2B = 0;
        
        led1 = !led1;
        Thread::wait(50);
    }
    
    M1B = 0;
    M2F = 0; 
    counter = 0;
    Thread::wait(200);
    

}
